{% extends 'index2.html' %}

{% block content %}
{% load static %}
<style>
    .custom-container {
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .actions {
        display: flex;
        justify-content: space-around;
        align-items: center;
        padding: 20px;
    }

    .actions button.standings {
        border: 1px solid;
        min-height: 50px;
        min-width: 100px;
        background-color: #FF800F;
        color: white;
        transition: .5s all;
    }

    .actions button.standings:hover {
        border-radius: 5px;
        border: 1px solid #FF800F;
        background-color: white;
        color: black;
    }

    .actions .timer {
        font-size: 20px;
        font-weight: bold;
    }
</style>

<body>
    <div class="actions">
        <button class="standings">Standings</button>
        <div id="timer">
            <!-- {{ timer_minutes }}:{{ timer_seconds }} If the time is passed as a prop -->
          Starts in  00 : 00
        </div>
        <script>
            // Assuming group_quiz.start_time and group_quiz.end_time are already defined as datetime fields in the context
            const startTime = new Date("{{ group_quiz.start_time | date:'Y-m-d\\TH:i:s' }}");
            const endTime = new Date("{{ group_quiz.end_time | date:'Y-m-d\\TH:i:s' }}");
        
            setInterval(function() {
                const currentTime = new Date(); // Get the current time
        
                if (currentTime >= startTime && currentTime <= endTime) {
                    // Quiz is in progress
                    const timeDiff = endTime.getTime() - currentTime.getTime(); // Calculate the difference between current time and end time
        
                    if (timeDiff <= 0) {
                        clearInterval(); // Stop the timer if end time has passed
                        document.getElementById("timer").innerHTML = "Completed"; // Update the timer element with a message
                    } else {
                        const diffInSeconds = Math.floor(timeDiff / 1000);
                        const diffInMinutes = Math.floor(diffInSeconds / 60);
                        const diffInHours = Math.floor(diffInMinutes / 60);
        
                        const remainingHours = diffInHours % 24;
                        const remainingMinutes = diffInMinutes % 60;
                        const remainingSeconds = diffInSeconds % 60;
        
                        const formattedTime =
                            "Ends in " +
                            remainingHours +
                            " hours, " +
                            remainingMinutes +
                            " minutes, " +
                            remainingSeconds +
                            " seconds";
        
                        document.getElementById("timer").innerHTML = formattedTime; // Update the timer element with the remaining time
                    }
                } else if (currentTime < startTime) {
                    // Quiz has not started yet
                    const timeDiff = startTime.getTime() - currentTime.getTime(); // Calculate the difference between current time and start time
        
                    const diffInSeconds = Math.floor(timeDiff / 1000);
                    const diffInMinutes = Math.floor(diffInSeconds / 60);
                    const diffInHours = Math.floor(diffInMinutes / 60);
        
                    const remainingDays = Math.floor(diffInHours / 24);
                    const remainingHours = diffInHours % 24;
                    const remainingMinutes = diffInMinutes % 60;
                    const remainingSeconds = diffInSeconds % 60;
        
                    const formattedTime =
                        "Starts in " +
                        remainingDays +
                        " days, " +
                        remainingHours +
                        " hours, " +
                        remainingMinutes +
                        " minutes, " +
                        remainingSeconds +
                        " seconds";
        
                    document.getElementById("timer").innerHTML = formattedTime; // Update the timer element with the remaining time to start
                } else {
                    // Quiz has already ended
                    clearInterval(); // Stop the timer
                    document.getElementById("timer").innerHTML = "Completed"; // Update the timer element with a message
                }
            }, 1000);
        </script>
    </div>
    <div class="container-xxl py-5 custom-container">
        
    </div>
</body>
{% endblock content %}